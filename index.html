<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moralis Web3.js Example</title>
    <!-- Include Moralis SDK -->
    <script src="https://unpkg.com/moralis@0.0.92/dist/moralis.js"></script>
</head>
<body>
    <h1>Moralis Web3.js Example</h1>

    <script>
        // Initialize Moralis with your Application ID and Server URL
        Moralis.initialize("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJub25jZSI6ImMwMTIyODBlLThkNmItNDJlMC04NWZkLTE0YmJiN2U2YTY4MyIsIm9yZ0lkIjoiMzcxNjQ3IiwidXNlcklkIjoiMzgxOTQ5IiwidHlwZUlkIjoiMWM1OWJlMDktOTM0MC00N2ZhLTg4MzMtZjU2MDYxMDk5NzI4IiwidHlwZSI6IlBST0pFQ1QiLCJpYXQiOjE3MDQ5MTA0MTcsImV4cCI6NDg2MDY3MDQxN30.mD4fI6qaNW8nra90jEU_cz3iLSffINfSgfxV-NofRhU");
        Moralis.serverUrl = "http://127.0.0.1:5500/index.html";

        async function switchNetworkAndAddToken() {
            // Check if the user is authenticated
            const user = Moralis.User.current();
            if (!user) {
                console.log("User not authenticated");
                return;
            }

            // Prompt the user to switch the network
            try {
                await Moralis.Web3.enable();
                const currentNetwork = await Moralis.Web3.getChainId();
                console.log("Current Network ID:", currentNetwork);

                // Switch to the desired network (e.g., BSC Testnet, Chain ID: 97)
                await Moralis.Web3.switchNetwork(97);
                const newNetwork = await Moralis.Web3.getChainId();
                console.log("New Network ID:", newNetwork);

                // Add a custom token (e.g., Binance Smart Chain Testnet BUSD)
                const customTokenAddress = "0x8301f2213c0eed49a7e28ae4c3e91722919b8b47";
                const customTokenSymbol = "BUSD";
                const customTokenDecimals = 18;

                await Moralis.Web3.addToken(customTokenAddress, customTokenSymbol, customTokenDecimals);
                console.log("Custom token added:", customTokenSymbol);
            } catch (error) {
                console.error("Error switching network or adding token:", error);
            }
        }

        // Call the function when the page is loaded
        switchNetworkAndAddToken();
    </script>
</body>
</html>
